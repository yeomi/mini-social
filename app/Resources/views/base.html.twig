<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>{% block title %} - Tpaschiche - {% endblock %}</title>
        {% block stylesheets %}
            <link rel="stylesheet" href="{{ asset("assets/css/global.css") }}"/>
            <link rel="stylesheet" href="{{ asset("assets/css/libs/slick.css") }}"/>
        {% endblock %}
        <link rel="icon" type="image/x-icon" href="{{ asset('favicon.png') }}" />
    </head>
    <body>

        <div id="status-message">
        {% block statusMessage %}
            {% for index, message in app.session.flashbag.get("info") %}
                <div class="info flash"><p>{{ message }}</p></div>
            {% endfor %}
            {% for index, message in app.session.flashbag.get("alert") %}
                <div class="alert"><p>{{ message }}</p></div>
            {% endfor %}
        {% endblock %}
        </div>

        {% block popups %}
            {{ render(controller("YeomiPostBundle:Main:menu")) }}
        {% if is_granted("IS_AUTHENTICATED_REMEMBERED") == false %}
            {{ render(controller("YeomiUserBundle:Main:login")) }}
        {% endif %}
            {{ render(controller("YeomiPostBundle:Main:addPost", {"type": "defi"})) }}
            {{ render(controller("YeomiPostBundle:Main:addPost", {"type": "histoire"})) }}
        {% endblock %}

        {% block header %}
            <div class="wrapper-width site-header">
                <header id="site-header">
                {% block menu_left %}
                    <nav class="main-nav left">
                        <ul>
                            <li><a href="" class="menu-toggle">â˜°</a></li>
                            <li><a href="" class="btn search">{% trans %}Search{% endtrans %}</a></li>
                            {% if is_granted("IS_AUTHENTICATED_REMEMBERED") %}
                                <li class="unread-messages-container">
                                    <a class="log-btn btn-light logout" href="{{ url("logout") }}">{{ app.user.username }} - {% trans %}Logout{% endtrans %}</a>
                                    {% set unreadMessage = render(controller("YeomiUserBundle:Profile:checkUnreadMessage")) %}
                                    {% if unreadMessage > 0 %}
                                        <span class="unread-messages">{{ unreadMessage }}</span>
                                    {% endif %}
                                </li>
                            {% else %}
                                <li><a class="log-btn btn-light login yeomi-popup-link" data-popup="login" {{ url("login") }}">{% trans %}Login{% endtrans %}</a></li>
                            {% endif %}
                        </ul>
                    </nav>
                {% endblock %}

                {% block logo %}
                    <a id="main-logo" href="{{ url("yeomi_post_index") }}">
                        <img src="{{ asset('assets/img/main-logo.png') }}" alt="Tpaschiche"/>
                    </a>
                {% endblock %}

                {% block menu_right %}
                    <nav class="main-nav right">
                        <ul>
                            <li><a class="btn new-challenge add-btn yeomi-popup-link" data-popup="add-defi" href="{{ url("yeomi_post_add_post", {"type": "defi"}) }}">{% trans %}Suggest a challenge{% endtrans %}</a></li>
                            <li><a class="btn new-story add-btn yeomi-popup-link" data-popup="add-histoire" href="{{ url("yeomi_post_add_post", {"type": "histoire"}) }}">{% trans %}Share a story{% endtrans %}</a></li>
                        </ul>
                    </nav>
                {% endblock %}
                </header>
            </div>
        {% endblock %}



        {% block body %}{% endblock %}
        {% block javascripts %}
            <script src="{{ asset("assets/js/libs/jquery-1.11.2.js") }}"></script>
            <script src="{{ asset("bundles/yeomipost/js/script.js") }}"></script>
            <script src="{{ asset("bundles/yeomiuser/js/script.js") }}"></script>
            <script src="{{ asset("bundles/yeomipost/js/vote.js") }}"></script>
            <script src="{{ asset("assets/js/script.js") }}"></script>
            <script src="{{ asset("assets/js/libs/slick.min.js") }}"></script>
        {% endblock %}
    </body>
</html>